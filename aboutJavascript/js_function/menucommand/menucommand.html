<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>命令模式</title>
	</head>
	<body>
		<button id="button1">点击按钮1</button>
		<button id="button2">点击按钮2</button>
		<button id="button3">点击按钮3</button>
		
	</body>
	<script type="text/javascript">
		var button1 = document.getElementById('button1');
		var button2 = document.getElementById('button2');
		var button3 = document.getElementById('button3');
		
//		//执行命令的动作被约定为调用command的execute()方法
//		var setCommand = function(button, command){
//			button.onClick = function(){
//				command.execute();
//			}
//		};
//		
//		//点击按钮的具体行为
//		var MenuBar = {
//			refresh: function(){
//				console.log('刷新菜单目录');
//			}
//		};
//		var SubMenu = {
//			add: function(){
//				console.log('增加子菜单');
//			},
//			del: function(){
//				console.log('删除子菜单');
//			}
//		};
//		
//		//把这些行为封装在命令类中
//		var RefreshMenuBarCommand = function(receiver){
//			this.receiver = receiver;
//		};
//		RefreshMenuBarCommand .prototype.execute = function(){
//			this.receiver.refresh();
//		};
//		var AddSubMenuCommand = function(receiver){
//			this.receiver = receiver;
//		};
//		AddSubMenuCommand.prototype.execute = function(){
//			this.receiver.add();
//		};
//		var DelSubMenuCommand = function(receiver){
//			this.receiver = receiver;
//		};
//		DelSubMenuCommand.prototype.execute = function(){
//			console.log('删除子菜单');
//		};
//		
//		//把命令接收者传入到command对象中，并且把command对象安装到button上
//		var refreshMenuBarCommand = new RefreshMenuBarCommand(MenuBar);
//		var addSubMenuCommand = new AddSubMenuCommand(SubMenu);
//		var delSubMenuCOmmand = new DelSubMenuCommand(SubMenu);
//		
//		setCommand(button1, refreshMenuBarCommand);
//		setCommand(button2,addSubMenuCommand);
//		setCommand(button3, delSubMenuCOmmand);


		//javascript中的命令模式
//		var bindClick = function(button, func){
//			button.onclick = func;
//		};
//		
//		var MenuBar = {
//			refresh: function(){
//				console.log('刷新菜单界面');
//			}
//		};
//		var SubMenu = {
//			add: function(){
//				console.log('增加子菜单');
//			},
//			del: function(){
//				console.log('删除子菜单');
//			}
//		};
//		bindClick(button1,MenuBar.refresh);
//		bindClick(button2,SubMenu.add);
//		bindClick(button3,SubMenu.del);

		//使用闭包的命令模式
		var setCommand = function(button,command){
			button.onclick = function(){
				command.execute();
			}
		};
		
		var MenuBar = {
			refresh: function(){
				console.log('刷新菜单界面');
			}
		};
		
		var RefreshMenuBarCommand = function(receiver){
			return {
				execute: function(){
					receiver.refresh();
				}
			}
		};
		
		var RefreshMenuBarCommand = RefreshMenuBarCommand(MenuBar);
		setCommand(button1,RefreshMenuBarCommand);
	</script>
</html>
